function keyVisual(){document.querySelector(".kv-img").insertAdjacentHTML("afterbegin",'<img src="../assets/images/bg-keyVisual.png" alt="더현대 다운 새로운 쇼핑 플랫폼">');var e;lottie.loadAnimation({container:document.querySelector(".kv-img"),renderer:"svg",loop:!1,autoplay:!0});let n=document.querySelector(".count"),o=n.innerText,m=e=>`url('../assets/images/kv-num${e}.png')`;function t(e){var t=e.split("");let u=o.split("");t.forEach((s,a)=>{if(","!==s&&s!==u[a]){var c=n.children[a];{var d=c,c=u[a],a=s;let e=d.querySelector(".top"),t=d.querySelector(".bottom"),n=d.querySelector(".leaf"),o=d.querySelector(".leaf-front"),i=d.querySelector(".leaf-back"),l=m(c),r=m(a);o.style.backgroundImage=r,i.style.backgroundImage=r,e.style.backgroundImage=r,t.style.backgroundImage=l,d.classList.add("flipping"),n.style.transform="rotateX(-180deg)",n.ontransitionend=()=>{t.style.backgroundImage=r,d.classList.remove("flipping"),n.style.transition="none",n.style.transform="rotateX(0deg)",n.offsetWidth,n.style.transition="",n.ontransitionend=null}}}}),o=e}e=o.split(""),n.innerHTML=e.map(e=>","===e?'<span class="comma">,</span>':(e=e,`
                <div class="flip-card">
                    <div class="top" style="background-image: ${e=m(e)}"></div>
                    <div class="bottom" style="background-image: ${e}"></div>
                    <div class="leaf">
                        <div class="leaf-front"></div>
                        <div class="leaf-back"></div>
                    </div>
                </div>`)).join("");let i=0,l=["2,345,690","2,400,210","3,123,456"];setInterval(()=>{i=(i+1)%l.length,t(l[i])},2e3)}window.onload=function(){keyVisual(),anchor(),inviteGiftInteraction(),boxOpen1(),boxOpen2(),loginFunction(),termsModal()},window.addEventListener("scroll",()=>{anchor()}),window.addEventListener("resize",()=>{anchor()});let anchorSwiper=null;function anchor(){var e=[...document.querySelectorAll(".anchor-pin")],t=[...document.querySelectorAll(".anchor-list > li")];let n=window.scrollY+52;e=e.map(e=>e.getBoundingClientRect().top+window.scrollY);null===anchorSwiper&&(anchorSwiper=new Swiper(".anchor",{slidesPerView:"auto",freeMode:!0,centeredSlides:!0,centeredSlidesBounds:!0,slideToClickedSlide:!0}));let o=0;e.forEach((e,t)=>{n>=e&&(o=t)}),anchorSwiper.slideTo(o),t.forEach((e,t)=>{e.classList.toggle("active",t===o)})}function inviteGiftInteraction(){let e=document.querySelector(".section.invite .obj-wrap");var t=document.querySelector(".section.invite .point-reward .txt-wrap"),n=e.querySelector("img").cloneNode(!0);t.style.animationDuration="1.4s",e.style.transition="0.5s cubic-bezier(0.54, 1.56, 0.64, 1)",n.classList.add("clone"),e.appendChild(n);let o=0;setInterval(function(){e.style.transform=`translateX(${-230*(o+1)}px)`,3===++o&&(setTimeout(()=>{o=0,e.style.transition="none",e.style.transform=`translateX(${-230*o}px)`},500),setTimeout(()=>{e.style.transition=".5s cubic-bezier(0.54, 1.56, 0.64, 1)"},600))},1500)}function boxOpen1(){var e=document.querySelectorAll(".btn.box-open");let n=lottie.loadAnimation({container:document.querySelector(".fanfare"),renderer:"svg",loop:!1,autoplay:!1,path:"../assets/json/fanfare.json"});e.forEach(function(e){e.addEventListener("click",()=>{if(e.classList.contains("point")){var t=document.querySelector(".overlay.box-opening.point");let e=new bootstrap.Modal(document.getElementById("pointBox"));t.classList.remove("hidden"),setTimeout(()=>{e.show(),n.play()},1200)}else if(e.classList.contains("check")){t=document.querySelector(".overlay.box-opening.result");let e=new bootstrap.Modal(document.getElementById("winning"));t.classList.remove("hidden"),setTimeout(()=>{e.show(),n.play()},1200)}})});e=document.querySelector("#pointBox .btn.close");e&&e.addEventListener("click",()=>{boxOverlay.classList.add("hidden"),pointBoxModal.hide(),n.stop()})}function boxOpen2(){var e=document.querySelector(".btn.box-open.check");e&&e.addEventListener("click",()=>{var e=document.querySelector(".overlay.box-opening.result");let t=new bootstrap.Modal(document.getElementById("notWinning"));e.classList.remove("hidden"),setTimeout(()=>{t.show()},1200)})}function loginFunction(){let e=document.querySelector("body"),t=document.querySelector(".overlay.login-area");t&&t.querySelector(".btn.close").addEventListener("click",()=>{t.classList.add("hidden"),e.classList.remove("stop")});var n=document.querySelectorAll(".overlay.login-area .input-item .input"),o=document.querySelectorAll(".overlay.login-area .input-item .input-btn");let l=!1;n.forEach(function(i){i.addEventListener("input",()=>{var e=i.closest(".input-item"),t=""!==i.value.trim(),n=e.querySelector(".input-btn.remove"),o=e.querySelector(".input-btn.eye-close"),e=e.querySelector(".input-btn.eye-show");i.classList.toggle("value",t),n&&(n.hidden=!t),t?(e&&(e.hidden=!l),o&&(o.hidden=l)):(e&&(e.hidden=!0),o&&(o.hidden=!0))})}),o.forEach(function(n){n.addEventListener("click",()=>{var e=n.closest(".input-item"),t=e.querySelector(".input");n.classList.contains("remove")?(t.value="",t.classList.remove("value"),e.querySelectorAll(".input-btn").forEach(e=>{e.hidden=!0})):(n.classList.contains("eye-close")?(e.querySelector(".eye-show").hidden=!1,l=!0):n.classList.contains("eye-show")&&(e.querySelector(".eye-close").hidden=!1,l=!1),n.hidden=!0)})})}function termsModal(){let n=document.querySelector("body");var e=document.querySelectorAll(".terms-active");let o=document.querySelectorAll(".overlay.terms");var t=document.querySelectorAll(".overlay-close .btn.close");e.forEach(function(e){e.addEventListener("click",()=>{let t=e.dataset.modal;o.forEach(e=>{e.classList.contains(t)&&e.classList.remove("hidden")}),n.classList.add("stop")})}),t.forEach(e=>{e.addEventListener("click",()=>{o.forEach(e=>{e.classList.add("hidden")}),n.classList.remove("stop")})})}